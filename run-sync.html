<!DOCTYPE html>
<html>
<head>
    <title>Running Airtable Sync</title>
</head>
<body>
    <h1>Syncing to Airtable...</h1>
    <div id="status">Initiating sync...</div>
    
    <script>
    fetch('https://qaqebpcqespvzbfwawlp.supabase.co/functions/v1/airtable-full-sync', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ sync_now: true })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('status').innerHTML = `
                <h2>✅ Sync Completed!</h2>
                <p>Total Records: ${data.totalRecords}</p>
                <p>Created: ${data.recordsCreated}</p>
                <p>Updated: ${data.recordsUpdated}</p>
                <p>Errors: ${data.errors}</p>
            `;
        } else {
            document.getElementById('status').innerHTML = `<h2>❌ Sync Failed: ${data.error}</h2>`;
        }
    })
    .catch(error => {
        document.getElementById('status').innerHTML = `<h2>❌ Error: ${error.message}</h2>`;
    });
    </script>
</body>
</html>